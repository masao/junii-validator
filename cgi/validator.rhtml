<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:tmasao@acm.org" />
<link rel="stylesheet" href="default.css" type="text/css" />
<title>JuNii2 Validator</title>
</head>
<body>
<!-- hhmts start -->
<div class="last-update">最終更新日: 2010年09月15日</div>
<!-- hhmts end -->
<h1>JuNii2 Validator</h1>
<div class="form">
<form action="<%=h @cgi.script_name %>" method="get" name="url">
<input type="text" name="url" value="<%=h( url || "http://" ) %>" size="70" />
<input type="submit" value="  Validate!  " />
</form>
</div>
<div class="help-text">
<p>
OAI-PMHサーバが、JuNii2メタデータに則ったXML形式を出力しているかを、XML Schemaにもとづいた、データの妥当性検証により確認します。
上記の入力欄に OAI-PMH サーバの「ベースURL」（baseURL）を入力してください。
</p>
</div>
<% if data %>
<div id="message">
<% if data[ :error ].empty? and data[ :warn ].empty? %>
<p id="success">
成功!!
OAI-PMHの設定に問題は見つかりませんでした。
</p>
<% end %>
<% [ :info, :error, :warn ].each do |k| %>
<% next if data[ k ].empty? %>
<div id="<%=h k %>">
<h2><%=h k.to_s.capitalize %> : <%=h data[ k ].size %></h2>
<ol>
<% data[ k ].each do |e| %>
  <% if e.kind_of?( Hash ) %>
  <li><%=h e[ :message ] %>
      <% if e[ :error_help ] %>
      <a href="http://drf.lib.hokudai.ac.jp/drf-techswg/index.php?DRF%2F%E3%81%BF%E3%82%93%E3%81%AA%E3%81%AE%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E4%BD%9C%E6%A5%AD%E8%A8%98%E9%8C%B2%2FOAI-PMH%20validator#<%=h e[:error_help] %>" title="これはなに？">?</a>
      <% end %>
      <br>for <a href="<%= validator.baseurl %>?verb=GetRecord&amp;identifier=<%=h e[ :identifier ] %>&amp;metadataPrefix=junii2"><%=h e[ :identifier ] %></a>
  <% else %>
  <li><%=h e %>
  <% end %>
<% end %>
</ol>
</div>
<% end %>
<% end %>
</p>
<hr />
<div id="footer">
<address>高久雅生 (Masao Takaku)<br />
</div>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-389547-4";
urchinTracker();
</script>
</body>
</html>
